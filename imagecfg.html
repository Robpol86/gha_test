<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      property="article:modified_time"
      content="2022-01-23T01:28:06+00:00"
    />
    <meta property="og:title" content="ImageCFG" />

    <meta property="og:type" content="website" />

    <meta
      property="og:url"
      content="https://rob86stage.robpol86.com/imagecfg.html"
    />

    <meta property="og:site_name" content="Robpol86.com" />

    <meta
      property="og:description"
      content="ImageCFG is a utility that probably does a lot of things (I cannot find any official documentation), but the only reason I use it is to fix old games (UT99 for example) which have problems on multicore/multicpu systems. It does so by assigning an executable to specific logical CPUs permanently (b..."
    />

    <meta
      property="og:image"
      content="https://rob86stage.robpol86.com/_static/logo.png"
    />

    <meta property="og:image:alt" content="Robpol86.com" />

    <meta name="twitter:card" content="summary_large_image" />
    <meta property="twitter:domain" content="rob86stage.robpol86.com" />
    <title>ImageCFG &#8212; Robpol86.com</title>

    <link href="_static/css/theme.css" rel="stylesheet" />
    <link
      href="_static/css/index.ff1ffe594081f20da1ef19478df9384b.css"
      rel="stylesheet"
    />

    <link
      rel="stylesheet"
      href="_static/vendor/fontawesome/5.13.0/css/all.min.css"
    />
    <link
      rel="preload"
      as="font"
      type="font/woff2"
      crossorigin
      href="_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2"
    />
    <link
      rel="preload"
      as="font"
      type="font/woff2"
      crossorigin
      href="_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2"
    />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link
      rel="stylesheet"
      type="text/css"
      href="_static/sphinx-book-theme.css?digest=84ace793992934648b4de8eed757e5a2"
    />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link
      rel="stylesheet"
      type="text/css"
      href="_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css"
    />
    <link
      rel="stylesheet"
      type="text/css"
      href="_static/panels-variables.06eb56fa6e07937060861dad626602ad.css"
    />
    <link
      rel="stylesheet"
      type="text/css"
      href="_static/background_image.css"
    />
    <link rel="stylesheet" type="text/css" href="_static/fixes.css" />

    <link
      rel="preload"
      as="script"
      href="_static/js/index.be7d3bbb2ef33a8344ce.js"
    />

    <script
      data-url_root="./"
      id="documentation_options"
      src="_static/documentation_options.js"
    ></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script src="_static/sphinx-book-theme.9d8b4a8b9bb19db25eeaddc40d639ba2.js"></script>
    <script src="_static/disqus.js"></script>
    <link
      rel="canonical"
      href="https://rob86stage.robpol86.com/imagecfg.html"
    />

    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link
      rel="next"
      title="Wireless Charging Car Dock"
      href="wireless_charging_car_dock.html"
    />
    <link
      rel="prev"
      title="US RNS-510 Video In Motion"
      href="rns_510_vim.html"
    />

    <link
      rel="apple-touch-icon"
      sizes="180x180"
      href="/apple-touch-icon.png?v=210604"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="32x32"
      href="/favicon-32x32.png?v=210604"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="16x16"
      href="/favicon-16x16.png?v=210604"
    />
    <link rel="manifest" href="/site.webmanifest?v=210604" />
    <link
      rel="mask-icon"
      href="/safari-pinned-tab.svg?v=210604"
      color="#7c7c7c"
    />
    <link rel="shortcut icon" href="/favicon.ico?v=210604" />
    <meta name="apple-mobile-web-app-title" content="Robpol86.com" />
    <meta name="application-name" content="Robpol86.com" />
    <meta name="msapplication-TileColor" content="#00a300" />
    <meta name="theme-color" content="#ffffff" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />

    <!-- Google Analytics -->
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    <div class="container-fluid" id="banner"></div>

    <div class="container-xl">
      <div class="row">
        <!-- Checkboxes to toggle the left sidebar -->
        <input
          type="checkbox"
          class="sidebar-toggle"
          name="__navigation"
          id="__navigation"
          aria-label="Toggle navigation sidebar"
        />
        <label class="overlay" for="__navigation">
          <div class="visually-hidden">Toggle navigation sidebar</div>
        </label>
        <div
          class="col-12 col-md-3 bd-sidebar site-navigation"
          id="site-navigation"
        >
          <div class="navbar-brand-box">
            <a class="navbar-brand text-wrap" href="index.html">
              <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->

              <img src="_static/logo.svg" class="logo" alt="logo" />
            </a>
          </div>
          <form
            class="bd-search d-flex align-items-center"
            action="search.html"
            method="get"
          >
            <i class="icon fas fa-search"></i>
            <input
              type="search"
              class="form-control"
              name="q"
              id="search-input"
              placeholder="Search the docs ..."
              aria-label="Search the docs ..."
              autocomplete="off"
            />
          </form>
          <nav class="bd-links" id="bd-docs-nav" aria-label="Main">
            <div class="bd-toc-item active">
              <p aria-level="2" class="caption" role="heading">
                <span class="caption-text"> Projects </span>
              </p>
              <ul class="nav bd-sidenav">
                <li class="toctree-l1">
                  <a class="reference internal" href="vw_alltrack_2019.html">
                    Golf Alltrack SE
                  </a>
                </li>
                <li class="toctree-l1">
                  <a class="reference internal" href="mib2_comp_media.html">
                    MIB2 Composition Media Hacking
                  </a>
                </li>
                <li class="toctree-l1">
                  <a class="reference internal" href="3d_printer_mpms2.html">
                    Monoprice Maker Select v2
                  </a>
                </li>
                <li class="toctree-l1">
                  <a class="reference internal" href="franklin_t9.html">
                    T-Mobile Franklin T9 Hacking
                  </a>
                </li>
                <li class="toctree-l1">
                  <a class="reference internal" href="photo_albums.html">
                    Photo Albums
                  </a>
                </li>
              </ul>
              <p aria-level="2" class="caption" role="heading">
                <span class="caption-text"> Tutorials </span>
              </p>
              <ul class="current nav bd-sidenav">
                <li class="toctree-l1">
                  <a class="reference internal" href="windows_11_mac.html">
                    Installing Windows 11 on a Mac
                  </a>
                </li>
                <li class="toctree-l1">
                  <a class="reference internal" href="raspberry_pi_luks.html">
                    Raspberry Pi LUKS Root Encryption
                  </a>
                </li>
                <li class="toctree-l1">
                  <a
                    class="reference internal"
                    href="root_certificate_authority.html"
                  >
                    Setting Up a Home Root CA
                  </a>
                </li>
                <li class="toctree-l1">
                  <a
                    class="reference internal"
                    href="raspberry_pi_project_fi.html"
                  >
                    Raspberry Pi on Project Fi
                  </a>
                </li>
                <li class="toctree-l1">
                  <a
                    class="reference internal"
                    href="postfix_gmail_forwarding.html"
                  >
                    Postfix and Gmail Forwarding
                  </a>
                </li>
                <li class="toctree-l1">
                  <a class="reference internal" href="bareos_tape_backup.html">
                    Bareos Tape Backup on a 124T
                  </a>
                </li>
                <li class="toctree-l1">
                  <a class="reference internal" href="flash_droid_cricket.html">
                    Flashing Motorola Droid to Cricket
                  </a>
                </li>
                <li class="toctree-l1">
                  <a class="reference internal" href="rns_510_vim.html">
                    US RNS-510 Video In Motion
                  </a>
                </li>
                <li class="toctree-l1 current active">
                  <a class="current reference internal" href="#"> ImageCFG </a>
                </li>
              </ul>
              <p aria-level="2" class="caption" role="heading">
                <span class="caption-text"> Archived Projects </span>
              </p>
              <ul class="nav bd-sidenav">
                <li class="toctree-l1">
                  <a
                    class="reference internal"
                    href="wireless_charging_car_dock.html"
                  >
                    Wireless Charging Car Dock
                  </a>
                </li>
                <li class="toctree-l1">
                  <a class="reference internal" href="atrix_lapdock.html">
                    Atrix Lapdock Other Uses
                  </a>
                </li>
                <li class="toctree-l1">
                  <a class="reference internal" href="vw_jsw_2010.html">
                    Jetta SportWagen TDI
                  </a>
                </li>
              </ul>
            </div>
          </nav>
          <!-- To handle the deprecated key -->

          <div class="navbar_extra_footer">
            <p>
              <a href="/genindex.html">Tags</a> |
              <a href="/sitemap.xml">Sitemap</a><br />Generator:
              <a href="https://www.sphinx-doc.org/">Sphinx</a><br />Theme:
              <a href="https://sphinx-book-theme.readthedocs.io/"
                >Sphinx Book Theme</a
              ><br />Host:
              <a href="https://www.nearlyfreespeech.net/"
                >NearlyFreeSpeech.NET</a
              ><br />License:
              <a
                href="https://github.com/Robpol86/robpol86.com/blob/main/LICENSE"
                >BSD-2-Clause</a
              ><br />
            </p>
          </div>
        </div>

        <!-- This is an invisible pixel that we watch to see if we've scrolled. -->
        <div class="sbt-scroll-pixel-helper"></div>
        <main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
          <div class="topbar container-xl fixed-top">
            <div class="topbar-contents row">
              <div
                class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"
              ></div>
              <div class="col pl-md-4 topbar-main">
                <div class="topbar-left">
                  <label class="nav-toggle-button" for="__navigation">
                    <div class="visually-hidden">Toggle navigation</div>
                    <i class="fas fa-bars"></i>
                  </label>
                </div>

                <div class="dropdown-buttons-trigger">
                  <button
                    id="dropdown-buttons-trigger"
                    class="btn btn-secondary topbarbtn"
                    aria-label="Download this page"
                  >
                    <i class="fas fa-download"></i>
                  </button>

                  <div class="dropdown-buttons">
                    <!-- ipynb file if we had a myst markdown file -->

                    <!-- Download raw file -->
                    <a class="dropdown-buttons" href="_sources/"
                      ><button
                        type="button"
                        class="btn btn-secondary topbarbtn"
                        title="Download source file"
                        data-toggle="tooltip"
                        data-placement="left"
                      >
                        .rst
                      </button></a
                    >
                    <!-- Download PDF via print -->
                    <button
                      type="button"
                      id="download-print"
                      class="btn btn-secondary topbarbtn"
                      title="Print to PDF"
                      onclick="printPdf(this)"
                      data-toggle="tooltip"
                      data-placement="left"
                    >
                      .pdf
                    </button>
                  </div>
                </div>

                <!-- GitHub link -->

                <a
                  class="edit-button"
                  href="https://github.com/Robpol86/robpol86.com/blob/main/docs/imagecfg.rst"
                >
                  <button
                    type="button"
                    class="btn btn-secondary topbarbtn"
                    data-toggle="tooltip"
                    data-placement="bottom"
                    aria-label="Edit this page"
                    title="Edit this page"
                  >
                    <i class="fab fa-github"></i>
                  </button>
                </a>

                <!-- Full screen (wrap in <a> to have style consistency -->

                <a class="full-screen-button"
                  ><button
                    type="button"
                    class="btn btn-secondary topbarbtn"
                    data-toggle="tooltip"
                    data-placement="bottom"
                    onclick="toggleFullScreen()"
                    aria-label="Fullscreen mode"
                    title="Fullscreen mode"
                  >
                    <i class="fas fa-expand"></i></button
                ></a>

                <!-- Launch buttons -->
              </div>

              <!-- Table of contents -->
              <div class="d-none d-md-block col-md-2 bd-toc show noprint">
                <div class="tocsection onthispage pt-5 pb-3">
                  <i class="fas fa-list"></i> Contents
                </div>
                <nav id="bd-toc-nav" aria-label="Page">
                  <ul class="visible nav section-nav flex-column">
                    <li class="toc-h2 nav-item toc-entry">
                      <a class="reference internal nav-link" href="#history">
                        History
                      </a>
                    </li>
                    <li class="toc-h2 nav-item toc-entry">
                      <a class="reference internal nav-link" href="#usage">
                        Usage
                      </a>
                    </li>
                    <li class="toc-h2 nav-item toc-entry">
                      <a class="reference internal nav-link" href="#examples">
                        Examples
                      </a>
                    </li>
                    <li class="toc-h2 nav-item toc-entry">
                      <a class="reference internal nav-link" href="#download">
                        Download
                      </a>
                    </li>
                    <li class="toc-h2 nav-item toc-entry">
                      <a class="reference internal nav-link" href="#comments">
                        Comments
                      </a>
                    </li>
                  </ul>
                </nav>
              </div>
            </div>
          </div>
          <div id="main-content" class="row">
            <div class="col-12 col-md-9 pl-md-3 pr-md-0">
              <!-- Table of contents that is only displayed when printing the page -->
              <div id="jb-print-docs-body" class="onlyprint">
                <h1>ImageCFG</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                  <div id="jb-print-toc">
                    <div>
                      <h2>Contents</h2>
                    </div>
                    <nav aria-label="Page">
                      <ul class="visible nav section-nav flex-column">
                        <li class="toc-h2 nav-item toc-entry">
                          <a
                            class="reference internal nav-link"
                            href="#history"
                          >
                            History
                          </a>
                        </li>
                        <li class="toc-h2 nav-item toc-entry">
                          <a class="reference internal nav-link" href="#usage">
                            Usage
                          </a>
                        </li>
                        <li class="toc-h2 nav-item toc-entry">
                          <a
                            class="reference internal nav-link"
                            href="#examples"
                          >
                            Examples
                          </a>
                        </li>
                        <li class="toc-h2 nav-item toc-entry">
                          <a
                            class="reference internal nav-link"
                            href="#download"
                          >
                            Download
                          </a>
                        </li>
                        <li class="toc-h2 nav-item toc-entry">
                          <a
                            class="reference internal nav-link"
                            href="#comments"
                          >
                            Comments
                          </a>
                        </li>
                      </ul>
                    </nav>
                  </div>
                </div>
              </div>

              <div>
                <div class="section" id="imagecfg">
                  <span id="id1"></span>
                  <h1>
                    ImageCFG<a
                      class="headerlink"
                      href="#imagecfg"
                      title="Permalink to this headline"
                      >¶</a
                    >
                  </h1>
                  <div class="admonition note">
                    <p class="admonition-title">Note</p>
                    <p>
                      I’ve been hosting this file
                      <a
                        class="reference external"
                        href="https://web.archive.org/web/20031203173758fw_/http://www.robpol86.com/tutorials/imagecfg.php"
                        >since before 2003</a
                      >. Too bad I don’t have a copy of an older version of this
                      page.
                    </p>
                  </div>
                  <p>
                    ImageCFG is a utility that probably does a lot of things (I
                    cannot find any official documentation), but the only reason
                    I use it is to fix old games (UT99 for example) which have
                    problems on multicore/multicpu systems. It does so by
                    assigning an executable to specific logical CPUs permanently
                    (by modifying the .exe file, so backup the original in case
                    you want to restore it).
                  </p>
                  <p>
                    This utility will work in pretty much any modern Windows
                    operating system (2000/XP/Vista/7) and it is meant to be
                    used on computers with multiple CPUs, multiple cores, or
                    Hyper Threading.
                  </p>
                  <div class="section" id="history">
                    <h2>
                      History<a
                        class="headerlink"
                        href="#history"
                        title="Permalink to this headline"
                        >¶</a
                      >
                    </h2>
                    <p>
                      Many years ago, sometime in 2001 or 2002, I was looking
                      for a utility that would permanently set which CPU a
                      program would run under. To my dismay checking the
                      affinity boxes in the task manager was only temporary, and
                      unless I set the affinity of tribes2.exe to one CPU
                      instead of both, my dual Pentium III Windows XP computer
                      would blue screen (it turned out a faulty VP6 motherboard
                      and dissimilar CPUs were to blame).
                    </p>
                    <p>
                      After many days of searching the internet and Direct
                      Connect, I finally found the utility. While searching I
                      noticed a lot of other people looking for the same tool,
                      so at that time I decided to host the tool and make it
                      easy for anyone to find. Since it’s a small tool that
                      hardly takes up disk space or bandwidth, I have decided to
                      keep hosting this file indefinitely.
                    </p>
                  </div>
                  <div class="section" id="usage">
                    <h2>
                      Usage<a
                        class="headerlink"
                        href="#usage"
                        title="Permalink to this headline"
                        >¶</a
                      >
                    </h2>
                    <p>
                      ImageCFG will work from any directory, but for ease of use
                      it can be placed in
                      <strong>%systemroot%system32</strong> (or
                      C:Windowssystem32 or C:WindowsSysWOW64 (thanks
                      chris.xudo333) if system32 doesn’t work) and
                      <strong>%systemroot%system32dllcache</strong> (or
                      C:Windowssystem32dllcache). Doing so will make
                      <code class="docutils literal notranslate"
                        ><span class="pre">imagecfg</span></code
                      >
                      a system command (run it from anywhere in any cmd window
                      or the run dialog). This article assumes you have done so.
                    </p>
                    <p>
                      The
                      <code class="docutils literal notranslate"
                        ><span class="pre">-u</span></code
                      >
                      option sets a specified executable to only run in
                      “uni-processor” mode on multi-processor systems. This is
                      probably optional but I run it anyways.
                    </p>
                    <p>
                      The
                      <code class="docutils literal notranslate"
                        ><span class="pre">-a</span></code
                      >
                      option sets a process affinity mask (hexadecimal value) to
                      the specified executable, so that it always runs using the
                      specified CPU. You can also add up the bits to set
                      multiple CPUs (thanks LigH). Examples (hex = decimal =
                      CPU):
                    </p>
                    <ul class="simple">
                      <li><p>0x01 = 1 = CPU0</p></li>
                      <li><p>0x02 = 2 = CPU1</p></li>
                      <li><p>0x04 = 4 = CPU2</p></li>
                      <li><p>0x08 = 8 = CPU3</p></li>
                      <li><p>0x10 = 16 = CPU4</p></li>
                      <li><p>0x20 = 32 = CPU5</p></li>
                      <li><p>0x40 = 64 = CPU6</p></li>
                      <li><p>0x80 = 128 = CPU7</p></li>
                      <li>
                        <p>
                          0x0f = 15 = CPU0, CPU1, CPU2, and CPU3 (1+2+4+8 = 15)
                        </p>
                      </li>
                    </ul>
                  </div>
                  <div class="section" id="examples">
                    <h2>
                      Examples<a
                        class="headerlink"
                        href="#examples"
                        title="Permalink to this headline"
                        >¶</a
                      >
                    </h2>
                    <p>
                      The following examples will use UT99 from Steam to fix the
                      speed issues I have been experiencing on my FX-60 (AMD
                      dual core) computer running Windows 7 Ultimate 64bit.
                    </p>
                    <p>
                      This first command is probably optional. It sets the exe
                      to use only one CPU:
                    </p>
                    <div class="highlight-bat notranslate">
                      <div class="highlight">
                        <pre><span></span>imagecfg -u <span class="s2">&quot;C:\Program Files (x86)\Steam\steamapps\common\unreal tournament\System\unrealtournament.exe&quot;</span>
</pre>
                      </div>
                    </div>
                    <p>
                      This is the important one. It sets the exe to use CPU0:
                    </p>
                    <div class="highlight-bat notranslate">
                      <div class="highlight">
                        <pre><span></span>imagecfg -a 0x1 <span class="s2">&quot;C:\Program Files (x86)\Steam\steamapps\common\unreal tournament\System\unrealtournament.exe&quot;</span>
</pre>
                      </div>
                    </div>
                  </div>
                  <div class="section" id="download">
                    <h2>
                      Download<a
                        class="headerlink"
                        href="#download"
                        title="Permalink to this headline"
                        >¶</a
                      >
                    </h2>
                    <p>
                      <a
                        class="reference download internal"
                        download=""
                        href="_downloads/7f7796a455da6c06f5b83015b11550e6/Imagecfg.zip"
                        ><code
                          class="xref download docutils literal notranslate"
                          ><span class="pre">Imagecfg.zip</span></code
                        ></a
                      >
                    </p>
                  </div>
                  <div class="section" id="comments">
                    <h2>
                      Comments<a
                        class="headerlink"
                        href="#comments"
                        title="Permalink to this headline"
                        >¶</a
                      >
                    </h2>
                    <div
                      data-disqus-identifier="ImageCFG"
                      data-disqus-shortname="rob86wiki"
                      id="disqus_thread"
                    ></div>
                  </div>
                </div>
              </div>

              <!-- Previous / next buttons -->
              <div class="prev-next-area">
                <a
                  class="left-prev"
                  id="prev-link"
                  href="rns_510_vim.html"
                  title="previous page"
                >
                  <i class="fas fa-angle-left"></i>
                  <div class="prev-next-info">
                    <p class="prev-next-subtitle">previous</p>
                    <p class="prev-next-title">US RNS-510 Video In Motion</p>
                  </div>
                </a>
                <a
                  class="right-next"
                  id="next-link"
                  href="wireless_charging_car_dock.html"
                  title="next page"
                >
                  <div class="prev-next-info">
                    <p class="prev-next-subtitle">next</p>
                    <p class="prev-next-title">Wireless Charging Car Dock</p>
                  </div>
                  <i class="fas fa-angle-right"></i>
                </a>
              </div>
            </div>
          </div>
          <footer class="footer">
            <p>
              &copy; Copyright 2022, Robpol86.<br />
              Last updated on Jan 23, 2022, 1:28:06 AM UTC.<br />
            </p>
          </footer>
        </main>
      </div>
    </div>

    <script src="_static/js/index.be7d3bbb2ef33a8344ce.js"></script>
  </body>
</html>
